# rest_service

REST сервис принимает json структуру. Дальше эта структура отправляется в route. У нас будет 4 роута(4 приложения).
В 1 роуте мы принимаем данные с сервиса. Потом генерируем id запроса, к которому будем потом обращаться. Camel настроит генератор UUID, чтобы найти компонент типа org.apache.camel.spi.UuidGenerator. Дальше мы работаем со структурой как с объектом в классе ZipFileProcessor. На 10 строке этого класса мы обращаемся к строке, которую надо преобразовать в архив. После преобразования у нас должна получиться коллекция объектов деталей. В роуте с помощью split мы делим наше body на несколько частей, то есть наша коллекция делится на несколько отдельных объектов. Здесь еще будет обработка параллельно в 10 потоков. Дальше мы преобразовываем каждый отдельный объект в xml файл. Для чего это делается: если напрямую отправить объект и при этом хотя бы какой-то байт изменится, то на другой стороне не получится его десериализовать.
Во 2 роуте происходит распределение по очередям. Там мы снова работаем сначала с объектом и распределяем, в какую очередь попадет сообщение. Причем перед отправкой в очередь мы снова превращаем объект в xml файл.
В 3 роуте выводим сообщение в лог.
В 4 роуте сохраняем данные детали вместе с uuid запроса в csv файл
